;(function(e,t){if(typeof define==="function"&&define.amd){define(["jquery"],t)}else if(typeof exports==="object"){t(require("jquery"))}else{t(e.jQuery)}})(this,function($){$.fn.drag=function(e,t,a){var n=typeof e=="string"?e:"";var r=$.isFunction(e)?e:$.isFunction(t)?t:null;if(n.indexOf("drag")!==0){n="drag"+n}a=(e==r?t:a)||{};return r?this.bind(n,a,r):this.trigger(n)};var e=$.event;var t=e.special;var a=t.drag={defaults:{which:1,distance:1,not:":input",handle:null,relative:false,drop:true,click:false,axis:null,allowDefault:false},datakey:"dragdata",noBubble:true,add:function(e){var t=$.data(this,a.datakey),n=e.data||{};t.related+=1;$.each(a.defaults,function(e,a){if(n[e]!==undefined){t[e]=n[e]}})},remove:function(){$.data(this,a.datakey).related-=1},setup:function(){if($.data(this,a.datakey)){return}var t=$.extend({related:0},a.defaults);$.data(this,a.datakey,t);e.add(this,"touchstart mousedown MSPointerDown",a.init,t);if(this.attachEvent){this.attachEvent("ondragstart",a.dontstart)}},teardown:function(){var t=$.data(this,a.datakey)||{};if(t.related){return}$.removeData(this,a.datakey);e.remove(this,"touchstart mousedown MSPointerDown",a.init);a.textselect(true);if(this.detachEvent){this.detachEvent("ondragstart",a.dontstart)}},init:function(n){if(a.touched){return}var r=n.data,i;if(n.which!=0&&r.which>0&&n.which!=r.which){return}if($(n.target).is(r.not)){return}if(r.handle&&!$(n.target).closest(r.handle,n.currentTarget).length){return}a.touched=n.type=="touchstart"||n.type=="MSPointerDown"?this:null;a.touchedMSPointer=n.type=="MSPointerDown";r.propagates=1;r.mousedown=this;r.interactions=[a.interaction(this,r)];r.target=n.target;r.pageX=n.pageX;r.pageY=n.pageY;r.startEvent=n;r.dragging=null;i=a.hijack(n,"draginit",r);if(!r.propagates){return}i=a.flatten(i);if(i&&i.length){r.interactions=[];$.each(i,function(){r.interactions.push(a.interaction(this,r))})}r.propagates=r.interactions.length;if(r.drop!==false&&t.drop){t.drop.handler(n,r)}a.textselect(false);if(a.touchedMSPointer){e.add(document,"MSPointerMove MSPointerUp MSPointerCancel",a.handler,r)}else if(a.touched){e.add(a.touched,"touchmove touchend",a.handler,r)}else{e.add(document,"mousemove mouseup",a.handler,r)}if(!a.touched||r.live)return false},interaction:function(e,t){var n=$(e)[t.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,drop:null,callback:new a.callback,droppable:[],offset:n,proxy:null,results:[],cancelled:false}},handler:function(n){var r=n.data;switch(n.type){case!r.dragging&&"touchmove":case!r.dragging&&"MSPointerMove":if(!r.allowDefault)n.preventDefault();if(!r.allowDefault)r.startEvent.preventDefault();case!r.dragging&&"mousemove":if(Math.pow(n.pageX-r.pageX,2)+Math.pow(n.pageY-r.pageY,2)<Math.pow(r.distance,2)){break}n.target=r.target;var i=new jQuery.Event(r.startEvent.type,r.startEvent);delete i.result;a.hijack(i,"dragstart",r);if(r.propagates){r.dragging=true}case"MSPointerMove":case"touchmove":if(r.axis==="x"){if(Math.abs(n.pageX-r.pageX)>=Math.abs(n.pageY-r.pageY)){if(!r.allowDefault)n.preventDefault()}}else if(r.axis==="y"){if(Math.abs(n.pageX-r.pageX)<=Math.abs(n.pageY-r.pageY)){if(!r.allowDefault)n.preventDefault()}}else{if(!r.allowDefault)n.preventDefault()}case"mousemove":if(r.dragging){a.hijack(n,"drag",r);if(r.propagates){if(r.drop!==false&&t.drop){t.drop.handler(n,r)}break}n.type="mouseup"}case"MSPointerUp":case"MSPointerCancel":case"touchend":case"mouseup":default:if(a.touchedMSPointer){e.remove(document,"MSPointerMove MSPointerUp MSPointerCancel",a.handler)}else if(a.touched&&!a.touchedMSPointer){e.remove(a.touched,"touchmove touchend",a.handler)}else{e.remove(document,"mousemove mouseup",a.handler)}if(r.dragging){if(r.drop!==false&&t.drop){t.drop.handler(n,r)}a.hijack(n,"dragend",r)}a.textselect(true);if(r.click===false&&r.dragging){$.data(r.mousedown,"suppress.click",n.timeStamp||n.originalEvent&&n.originalEvent.timeStamp||(new Date).getTime()+5)}r.dragging=a.touched=a.touchedMSPointer=false;break}},hijack:function(t,n,r,i,o){if(!r){return[]}var l={event:t.originalEvent,type:t.type},s=n.indexOf("drop")?"drag":"drop",c=i||0,d,u,f,p=!isNaN(i)?i:r.interactions.length;t.type=n;t.originalEvent=null;r.results=[];do{if(d=r.interactions[c]){if(n!=="dragend"&&d.cancelled){continue}f=a.properties(t,r,d);d.results=[];$(o||d[s]||r.droppable).each(function(i,o){var l;f.target=o;t.isPropagationStopped=function(){return false};t.isImmediatePropagationStopped=function(){return false};l=o?e.dispatch.call(o,t,f):null;if(l===false){if(s==="drag"){d.cancelled=true;r.propagates-=1}if(n==="drop"){d[s][i]=null}}else if(n==="dropinit"){d.droppable.push(a.element(l)||o)}if(n==="dragstart"){d.proxy=$(a.element(l)||d.drag)[0]}d.results.push(a.element(l)||o);delete t.result;if(n!=="dropinit"){return l}return true});r.results[c]=a.flatten(d.results);if(n==="dropinit"){d.droppable=a.flatten(d.droppable)}if(n==="dragstart"&&!d.cancelled){f.update()}}}while(++c<p);t.type=l.type;t.originalEvent=l.event;return a.flatten(r.results)},properties:function(e,t,n){var r=n.callback;r.drag=n.drag;r.proxy=n.proxy||n.drag;r.startX=t.pageX;r.startY=t.pageY;r.deltaX=e.pageX-t.pageX;r.deltaY=e.pageY-t.pageY;r.originalX=n.offset.left;r.originalY=n.offset.top;r.offsetX=r.originalX+r.deltaX;r.offsetY=r.originalY+r.deltaY;r.drop=a.flatten((n.drop||[]).slice());r.available=a.flatten((n.droppable||[]).slice());return r},element:function(e){if(e&&(e.jquery||e.nodeType===1)){return e}return undefined},flatten:function(e){return $.map(e,function(e){return e&&e.jquery?$.makeArray(e):e&&e.length?a.flatten(e):e})},textselect:function(e){$(document)[e?"unbind":"bind"]("selectstart",a.dontstart).css("MozUserSelect",e?"":"none");document.unselectable=e?"off":"on"},dontstart:function(){return false},callback:function(){}};a.callback.prototype={update:function(){if(t.drop&&this.available.length){$.each(this.available,function(e){t.drop.locate(this,e)})}}};if(!t.click){t.click={}}var n=t.click.preDispatch;t.click.preDispatch=function(e){var t=(e.timeStamp||e.originalEvent&&e.originalEvent.timeStamp||(new Date).getTime())-50;if($.data(this,"suppress.click")>=t){$.removeData(this,"suppress.click");return false}if(n){return n.apply(this,arguments)}};var r=e.fixHooks.MSPointerMove=e.fixHooks.MSPointerUp=e.fixHooks.MSPointerDown={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,t){if(t){$.each(r.props,function(a,n){e[n]=t[n]})}return e}};var i=e.fixHooks.touchstart=e.fixHooks.touchmove=e.fixHooks.touchend=e.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,t){if(t){var a=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||null;if(a){$.each(i.props,function(t,n){e[n]=a[n]})}}return e}};t.draginit=t.dragstart=t.dragend=a});
